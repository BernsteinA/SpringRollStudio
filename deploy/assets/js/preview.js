!function(a){var b=require("nw.gui"),c=function(){this.main=null,this.menubar=null,this.main=b.Window.get(),this.main.on("close",this.shutdown.bind(this))};c.create=function(b){a(function(){window.module=new b})};var d=c.prototype;d.focus=function(){this.main&&this.menubar&&(this.main.menu=this.menubar)},d.initMenubar=function(a,c){return this.menubar=new b.Menu({type:"menubar"}),"darwin"===process.platform&&this.menubar.createMacBuiltin("SpringRoll Studio",{hideEdit:!!a,hideWindow:!!c}),this.focus(),this.menubar},d.shutdown=function(){this.close(!0)},d.close=function(a){this.main.close(a),this.main=null,this.menubar=null},namespace("springroll").Module=c}(jQuery),function(){var a=require("connect"),b=require("serve-static"),c=require("path"),d=springroll.Module,e=function(){d.call(this);var e=a(),f=localStorage.getItem("project");e.use(b(c.join(f,"deploy"),{index:["index.html"]})),this.server=e.listen(3e3),this.location="http://localhost:3000",this.iframe=$("#preview"),$("#refreshButton").click(this.refresh.bind(this)),$("#devToolsButton").click(this.toggleDevTools.bind(this)),$("#title").text(c.basename(f)),this.refresh()},f=extend(e,d);f.refresh=function(){this.iframe.prop("src",this.location)},f.toggleDevTools=function(){this.main.isDevToolsOpen()?this.main.closeDevTools():this.main.showDevTools(this.iframe[0])},f.shutdown=function(){this.iframe=null,this.server&&(this.server.close(),this.server=null),this.close(!0)},d.create(e)}();